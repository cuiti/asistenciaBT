document.addEventListener("deviceready",onDeviceReady,!1);var currentUserID,profesor;function onDeviceReady(){profesor=window.localStorage.getItem("esProfesor");currentUserID=localStorage.getItem("user_id");$("#preload").show();Server.initialize(function(){ko.applyBindings(new CursosVM)},function(){console.log("error :(")})}function internet(){return navigator.connection.type!=Connection.NONE}
function Curso(b){var a=this;a.id=b.id;a.nombre=b.nombre;a.descripcion=b.descripcion;a.id_profesor=b.id_profesor;a.address_profesor=b.address_profesor;a.usuario_profesor=b.usuario_profesor;a.setAsCurrent=function(){localStorage.setItem("currentCursoID",a.id);localStorage.setItem("currentCurso",JSON.stringify(a));window.location="curso.html"}}
function CursosVM(){var b=this;b.cursos=ko.observableArray([]);b.cursosDocente=ko.observableArray([]);b.getCursosSuccess=function(a){$("#preload").hide();a=$.map(a,function(a){return new Curso(a)});0!=a.length&&(b.cursos(a),window.localStorage.setItem("cursosComoAlumno",JSON.stringify(a)))};b.getCursosFailure=function(a){$("#preload").hide();console.error(a.error)};b.getCursosDocenteSuccess=function(a){"true"==profesor?($("#preload").hide(),a=$.map(a,function(a){return new Curso(a)}),0!=a.length&&
(b.cursosDocente(a),window.localStorage.setItem("cursosComoDocente",JSON.stringify(a)))):$("#cursos_docente").hide();Server.getCursosById(currentUserID,b.getCursosSuccess,b.getCursosFailure)};b.initialize=function(){if(internet())Server.getCursosDocente(currentUserID,b.getCursosDocenteSuccess,b.getCursosFailure);else{$("#preload").hide();var a=window.localStorage.getItem("cursosComoDocente"),c=window.localStorage.getItem("cursosComoAlumno"),a=JSON.parse(a),c=JSON.parse(c),a=$.map(a,function(a){return new Curso(a)}),
c=$.map(c,function(a){return new Curso(a)});b.cursosDocente(a);b.cursos(c)}};b.initialize()};