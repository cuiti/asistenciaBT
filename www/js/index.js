var device_address,EstaRegistrado,app={initialize:function(){this.bindEvents()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},getUserInformationFailure:function(a){alert("data matata")},getUserInformationSuccess:function(a){$("#preloader").hide();a.status&&($("#bienvenida").show(),a.status&&(window.localStorage.setItem("esProfesor",!0),$("#crearCurso").show()))},ServerInitalizationFailure:function(){alert("no server")},getUserData:function(){var a=window.localStorage.getItem("user_id");
Server.usuarioProfesor(a,app.getUserInformationSuccess,app.getUserInformationFailure)},CheckMacAddressOnServer:function(){window.MacAddress.getMacAddress(function(a){device_address=a;Server.checkMacServer(device_address,app.getMacSuccess,app.getMacFailure)},function(a){alert(a)})},setCurrentUser:function(a){window.localStorage.setItem("Mac",device_address);window.localStorage.setItem("user_id",a.id);$("#preloader").hide();$("#bienvenida").show();Server.initialize(app.getUserData,app.ServerInitalizationFailure)},
CurrentUserFail:function(a){},getMacSuccess:function(a){(EstaRegistrado=a.status)?Server.getCurrentUser(device_address,app.setCurrentUser,app.CurrentUserFail):($("#preloader").hide(),location.href="pp.html")},getMacFailure:function(a){},onDeviceReady:function(){Server.initialize(function(){},function(){console.log("error :(")});var a=navigator.connection.type,b=window.localStorage.getItem("esProfesor"),c=window.localStorage.getItem("Mac"),a=a!=Connection.NONE;null==c?a?app.CheckMacAddressOnServer():
swal({title:"Error",text:"Sin conexi\u00f3n no se pueden recuperar tus datos, intentalo nuevamente en otro momento",type:"error",showCancelButton:!1,confirmButtonText:"ok",closeOnConfirm:!1},function(){window.location="fail.html"}):null==b?a?($("#preloader").hide(),$("#bienvenida").show(),Server.initialize(app.getUserData,app.ServerInitalizationFailure)):swal({title:"Error",text:"Sin conexi\u00f3n no se pueden recuperar tus datos, intentalo nuevamente en otro momento",type:"error",showCancelButton:!1,
confirmButtonText:"ok",closeOnConfirm:!1},function(){window.location="fail.html"}):b&&($("#bienvenida").show(),$("#preloader").hide(),$("#crearCurso").show())}};app.initialize();