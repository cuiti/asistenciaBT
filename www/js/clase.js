document.addEventListener("deviceready",onDeviceReady,!1);var currentClaseID;function onDeviceReady(){$("#preload").show();currentClaseID=JSON.parse(localStorage.getItem("currentClaseID"));Server.initialize(function(){ko.applyBindings(new ClaseVM)},function(){console.log("error :(")})}function internet(){return navigator.connection.type!=Connection.NONE}
function Alumno(a){var b=this;b.id=a.usuario_id;b.nombre=a.nombre+" "+a.apellido;b.apellido=a.apellido;b.estado=ko.observable(a.estado);b.Ausente=ko.observable("Ausente"==b.estado());b.MarcarPresente=function(){swal({title:"\u00bfEstas seguro de marcar como presente a este alumno?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Marcar Presente",closeOnConfirm:!1},function(){Server.pasarPresente(b.id,currentClaseID,function(a){b.estado("Presente");b.Ausente(!1);
swal("Ok","Alumno marcado como Presente!","success")},function(a){alert("No se le pudo pasar presente")})})}}
function ClaseVM(){var a=this;a.id=currentClaseID;a.alumnos=ko.observableArray([]);a.fecha=ko.observable("");a.getDataForClassSuccess=function(b){$("#preload").hide();a.fecha(b.fecha);b=$.map(b.alumnos,function(a){return new Alumno(a)});0!=b.length&&a.alumnos(b)};a.getDataForClassFailure=function(a){$("#preload").hide();console.error(a.error)};a.initialize=function(){internet()?Server.getClaseByID(a.id,a.getDataForClassSuccess,a.getDataForClassFailure):alert("Sin internet no se puede obtener el hisotial")};
a.initialize()};